/*! Striking MultiFlex
* https://kaptinlin.com/themes/strikingr
* Copyright (c) 2015 Lyon Holding Limited */
!function(a){var b=function(a){var b=a.clone(),c=a.find("canvas");if(c.length){var d=b.find("canvas");d.each(function(a){var b=this.getContext("2d");b.drawImage(c.get(a),0,0)})}return b};a.fn.quicksand=function(c,d){var e={duration:750,easing:"swing",attribute:"data-id",adjustHeight:"auto",adjustWidth:"auto",useScaling:!1,enhancement:function(){},selector:"> *",atomic:!1,dx:0,dy:0,maxWidth:0,retainExisting:!0},f=function(){for(var a="transform WebkitTransform MozTransform OTransform msTransform".split(" "),b=document.createElement("div"),c=0;c<a.length;c++)if("undefined"!=typeof b.style[a[c]])return!0;return!1}();a.extend(e,d),f&&"undefined"!=typeof a.fn.scale||(e.useScaling=!1);var g;return g="function"==typeof arguments[1]?arguments[1]:arguments[2],this.each(function(d){var f,h,i=[];h="function"==typeof e.attribute?a(c):b(a(c).filter("["+e.attribute+"]"));var j,k,l=a(this),m=a(this).css("height"),n=a(this).css("width"),o=!1,p=!1,q=a(l).offset(),r=[],s=a(this).find(e.selector),t=a(s).innerWidth();if(navigator.userAgent.match(/msie [6]/i))return void l.html("").append(h);var u=0,v=function(){if(a(this).css("margin","").css("position","").css("top","").css("left","").css("opacity",""),!u){if(u=1,!e.atomic){var b=l.find(e.selector);if(e.retainExisting){var c=a([]);A.find(e.selector).each(function(d){var f=a([]);if("function"==typeof e.attribute){var g=e.attribute(a(this));b.each(function(){return e.attribute(this)==g?(f=a(this),!1):void 0})}else f=b.filter("["+e.attribute+'="'+a(this).attr(e.attribute)+'"]');f.length>0&&(c=c.add(f),0===d?l.prepend(f):f.insertAfter(l.find(e.selector).get(d-1)))}),b.not(c).remove()}else l.prepend(A.find(e.selector)),b.remove();o&&l.css("height",j),p&&l.css("width",n)}e.enhancement(l),"function"==typeof g&&g.call(this)}!1===e.adjustHeight&&l.css("height","auto"),!1===e.adjustWidth&&l.css("width","auto")},w=l.offsetParent(),x=w.offset();"relative"==w.css("position")?"body"!=w.get(0).nodeName.toLowerCase()&&(x.top+=parseFloat(w.css("border-top-width"))||0,x.left+=parseFloat(w.css("border-left-width"))||0):(x.top-=parseFloat(w.css("border-top-width"))||0,x.left-=parseFloat(w.css("border-left-width"))||0,x.top-=parseFloat(w.css("margin-top"))||0,x.left-=parseFloat(w.css("margin-left"))||0),isNaN(x.left)&&(x.left=0),isNaN(x.top)&&(x.top=0),x.left-=e.dx,x.top-=e.dy,l.css("height",a(this).height()),l.css("width",a(this).width()),s.each(function(b){r[b]=a(this).offset()}),a(this).stop();var y=0,z=0;s.each(function(b){a(this).stop();var c=a(this).get(0);"absolute"==c.style.position?(y=-e.dx,z=-e.dy):(y=e.dx,z=e.dy),c.style.position="absolute",c.style.margin="0",e.adjustWidth||(c.style.width=t+"px"),c.style.top=r[b].top-parseFloat(c.style.marginTop)-x.top+z+"px",c.style.left=r[b].left-parseFloat(c.style.marginLeft)-x.left+y+"px",e.maxWidth>0&&r[b].left>e.maxWidth&&(c.style.display="none")});var A=b(a(l)),B=A.get(0);if(B.innerHTML="",B.setAttribute("id",""),B.style.height="auto",B.style.width=l.width()+"px",A.append(h),A.insertBefore(l),A.css("opacity",0),B.style.zIndex=-1,B.style.margin="0",B.style.position="absolute",B.style.top=q.top-x.top+"px",B.style.left=q.left-x.left+"px","dynamic"===e.adjustHeight?l.animate({height:A.height()},e.duration,e.easing):"auto"===e.adjustHeight&&(j=A.height(),parseFloat(m)<parseFloat(j)?l.css("height",j):o=!0),"dynamic"===e.adjustWidth?l.animate({width:A.width()},e.duration,e.easing):"auto"===e.adjustWidth&&(k=A.width(),parseFloat(n)<parseFloat(k)?l.css("width",k):p=!0),s.each(function(){var b=[];"function"==typeof e.attribute?(f=e.attribute(a(this)),h.each(function(){return e.attribute(this)==f?(b=a(this),!1):void 0})):b=h.filter("["+e.attribute+'="'+a(this).attr(e.attribute)+'"]'),i.push(b.length?e.useScaling?{element:a(this),dest:b,style:{top:a(this).offset().top,left:a(this).offset().left,opacity:""},animation:{top:b.offset().top-x.top,left:b.offset().left-x.left,opacity:1,scale:"1.0"}}:{element:a(this),dest:b,style:{top:a(this).offset().top,left:a(this).offset().left,opacity:""},animation:{top:b.offset().top-x.top,left:b.offset().left-x.left,opacity:1}}:e.useScaling?{element:a(this),animation:{opacity:"0.0",style:{top:a(this).offset().top,left:a(this).offset().left,opacity:""},scale:"0.0"}}:{element:a(this),style:{top:a(this).offset().top,left:a(this).offset().left,opacity:""},animation:{opacity:"0.0"}})}),h.each(function(){var c=[],d=[];"function"==typeof e.attribute?(f=e.attribute(a(this)),s.each(function(){return e.attribute(this)==f?(c=a(this),!1):void 0}),h.each(function(){return e.attribute(this)==f?(d=a(this),!1):void 0})):(c=s.filter("["+e.attribute+'="'+a(this).attr(e.attribute)+'"]'),d=h.filter("["+e.attribute+'="'+a(this).attr(e.attribute)+'"]'));var g;if(0===c.length&&d.length>0){g=e.useScaling?{opacity:"1.0",scale:"1.0"}:{opacity:"1.0"};var j=b(d),k=j.get(0);k.style.position="absolute",k.style.margin="0",e.adjustWidth||(k.style.width=t+"px"),k.style.top=d.offset().top-x.top+"px",k.style.left=d.offset().left-x.left+"px",j.css("opacity",0),e.useScaling&&j.scale(0),j.appendTo(l),(0===e.maxWidth||d.offset().left<e.maxWidth)&&i.push({element:a(j),dest:d,animation:g})}}),A.remove(),e.atomic){for($toDelete=l.find(e.selector),l.prepend(A.find(e.selector)),d=0;d<i.length;d++)if(i[d].dest&&i[d].style){var C=i[d].dest,D=C.offset();C.css({position:"relative",top:i[d].style.top-D.top,left:i[d].style.left-D.left}),C.animate({top:"0",left:"0"},e.duration,e.easing,v)}else i[d].element.animate(i[d].animation,e.duration,e.easing,v);$toDelete.remove()}else for(e.enhancement(l),d=0;d<i.length;d++)i[d].element.animate(i[d].animation,e.duration,e.easing,v)})}}(jQuery);