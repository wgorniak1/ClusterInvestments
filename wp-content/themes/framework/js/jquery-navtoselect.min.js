/*! jQuery NavToSelect - v0.2.4 - 2014-09-06
* https://github.com/amazingSurge/jquery-navToSelect
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c){"use strict";var d=function(b,e){this.element=b,this.$element=c(b),this._isBuilded=!1,this.options=c.extend(d.defaults,e);var f=this;c.extend(f,{init:function(){var b=f.getItems();f.build(b),f.$select.on("change",f.options.onChange),f.$element.trigger("navToSelect::ready"),c(a).on("orientationchange",function(){f.$select.is(":hidden")&&f.$select.is(":focus")&&f.$select.blur()})},build:function(a){f.$select=c("<select />",{"class":f.options.namespace}).html(f.buildOptions(a,1)),null===f.options.prependTo?f.$element.after(f.$select):f.$select.prependTo(f.options.prependTo),f._isBuilded=!0},buildOption:function(a,b){var c=new Array(b).join(f.options.indentString);return 1!==b&&f.options.indentSpace&&(c+="&nbsp;"),'<option value="'+a.value+'"'+(a.linkable===!1?' data-linkable="false"':"")+(a.actived===!0?' selected="selected"':"")+">"+c+a.label+"</option>"},buildOptions:function(a,b){if(b>f.options.maxLevel)return"";var d="";return c.each(a,function(a,c){c.linkable===!1&&"undefined"!=typeof c.items&&1===b&&f.options.useOptgroup&&(d+='<optgroup label="'+c.label+'">',d+=f.buildOptions(c.items,b+1),d+="</optgroup>"),"undefined"!=typeof c.items?(d+=f.buildOption(c,b),d+=f.buildOptions(c.items,b+1)):d+=f.buildOption(c,b)}),d},getItems:function(){var a=[];return f.options.placeholder&&(a=a.concat({value:"#",label:f.options.placeholder,linkable:!1})),a=a.concat(f.options.getItemsFromList.call(f,f.$element,1))},getItemValue:function(a){return a.find(f.options.linkSelector).attr("href")},isLinkable:function(a){return"#"!==f.getItemValue(a)},isActived:function(a){return a.is("."+f.options.activeClass)},isBuilded:function(){return f._isBuilded}}),this.init()};d.defaults={maxLevel:4,prependTo:null,activeClass:"active",linkSelector:"a:first",indentString:"&ndash;",indentSpace:!0,placeholder:"Navigate to...",useOptgroup:!1,namespace:"navToSelect",itemFilter:function(){return!0},getItemLabel:function(a){return a.find(this.options.linkSelector).text()},getItemsFromList:function(a,b){var d=this,e=[];return a.children("li").each(function(){var a=c(this);if(d.options.itemFilter(a)){var f={value:d.getItemValue(a),label:d.options.getItemLabel.call(d,a),linkable:d.isLinkable(a),actived:d.isActived(a)};a.children("ul, ol").length&&(f.items=[],a.children("ul, ol").each(function(){f.items=f.items.concat(d.options.getItemsFromList.call(d,c(this),b+1))})),e.push(f)}}),e},onChange:function(){c(this).data("linkable")!==!1&&(b.location.href=this.value)}},d.prototype={constructor:d,getSelect:function(){return this.$select},destroy:function(){this.$select.remove(),this.$element.data("NavToSelect",null)}},c.fn.navToSelect=function(a){if("string"!=typeof a)return this.each(function(){var b=c.data(this,"navToSelect");b||(b=new d(this,a),c.data(this,"navToSelect",b))});var b=a,e=Array.prototype.slice.call(arguments,1);if(!/^(getSelect)$/.test(b))return this.each(function(){var a=c.data(this,"navToSelect");a&&"function"==typeof a[b]&&a[b].apply(a,e)});var f=this.first().data("navToSelect");return f&&"function"==typeof f[b]?f[b].apply(f,e):void 0}}(window,document,jQuery);